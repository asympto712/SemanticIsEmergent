---
import Layout from "../layouts/Layout.astro";
import { render, getCollection } from 'astro:content'
import BlogList from "../components/BlogList.astro";
import { set } from "astro:schema";
import BlogRouter from "../components/BlogRouter.astro";

const pageTitle = "Blog";
const posts = await getCollection('blog');
const uniqueTags = [...new Set(posts.map((post:any) => post.data.tags).flat())];
---

<Layout pageTitle={pageTitle}>
  <div class="flex-container-main-screen">
    <div class="main-screen-left">
      <BlogRouter groupName="tags" items={uniqueTags} />
    </div>
    <div class="main-screen-center">
      <BlogList posts={posts} />
    </div>
  </div>
</Layout>

<style>
  .flex-container-main-screen {
    display: flex;
    flex-direction: row;
    align-items: stretch;
  }
  .main-screen-center {
    flex-basis: 70%;
    /* border: 1pt solid black; */
  }
  .main-screen-left {
    flex-basis: 15%;
    position: relative;
    border: 1pt solid black;
    background-color: burlywood;
  }
</style>